+++
title= "hammerspoon config for mac"
description= "macOS 自动化工具"
date = "2025-10-15"
tags = [
    "hammerspoon"
]
categories = [
  "技术"
]
series = [
  "工具"
]
#menu = "main"
+++

#### 说明
   Hammerspoon 是一款革命性的 macOS 桌面自动化工具，它将系统级 API 与灵活的 Lua 脚本引擎相结合。通过编写自定义的 Lua 脚本，您可以对系统进行强大的控制。   
   程序员一般的工作习惯都是两个显示屏幕，两个浏览器窗口，多个编程编辑器窗口，再加至少一个即时通讯工具,或者还有一个终端console。如果使用系统快捷键切换不够精确，用鼠标又不方便，特别是需要把光标移到扩展的显示屏的时候。Hammerspoon作为一个专业的macos自动化工具可以带领很大的方便。
   + 如果快捷键不起作用，切换输入法为英文.
   + 以下快捷键，里面有“+”号，表示分段，不代表键盘，先按前面部分，在1秒内再按后面部分。
   + vscode版本:1.80.1. 安装了golang,vim插件。macos 12.6.
   + https://github.com/Hammerspoon/hammerspoon

##### 环境

   + Macos 14 
   + Hammerspoon 1.0.0

##### 安装
   + 官方连接 https://github.com/Hammerspoon/hammerspoon
   + 参考说明，下载dmg文件安装或者brew安装均可。


##### 默认功能快捷键
   + ⌘+`, `为tab键上面的按键。弹出来一个选择窗口,如下:
    ![image](images/post/tools/2015-10-15-1.jpg)
   + 再按数字或者字母，即可切换到对应的窗口。

##### 自定义功能快捷键

   + 点击右上角🔨图标，选择 “open config",可以自己写lua脚本。再次选择 “reload config”即可生效。  
   + lua脚本功能可参考github官网.  
   + 以下是我个人实现的一些功能，比如鼠标光标在主显示屏和扩展屏之间切换, vscode多个窗口循环切换等。  

   ```
local hotswitchHs = require("hotswitch-hs/hotswitch-hs")
-- hotswitchHs.enableAutoUpdate() -- If you don't want to update automatically, remove this line.
--hotswitchHs.setAutoGeneratedKeys({"1", "2", "3", "4", "5", "6", "7", "8", "9", "0"})
hotswitchHs.enableAllSpaceWindows()

hs.hotkey.bind({"command"}, "`", hotswitchHs.openOrClose) -- Set a keybind you like to open HotSwitch-HS panel.

-- 使用【Option+tab】在不同屏幕之间移动鼠标
-- option==alt
hs.hotkey.bind({'option'}, 'tab', function()
    local screen = hs.mouse.getCurrentScreen()
    local nextScreen = screen:next()
    local rect = nextScreen:fullFrame()
    local center = hs.geometry.rectMidPoint(rect)
    hs.mouse.absolutePosition(center)
end)
  
-- 使用【Option+W】在不同屏幕之间移动窗口
hs.hotkey.bind({'option'}, 'W', function()
    -- get the focused window
    local win = hs.window.focusedWindow()
    -- get the screen where the focused window is displayed, a.k.a. current screen
    local screen = win:screen()
    -- compute the unitRect of the focused window relative to the current screen
    -- and move the window to the next screen setting the same unitRect 
    win:move(win:frame():toUnitRect(screen:frame()), screen:next(), true, 0)
end)

local function openApp(appName)
    local app = hs.application.get(appName)
    if not app then
        hs.application.launchOrFocus(appName)
    else
        app:activate()
    end
end

-- alt+ a - z
hs.hotkey.bind({'alt'}, 'c', function() openApp("Chrome") end)
hs.hotkey.bind({'alt'}, 'i', function() openApp("微信") end)
hs.hotkey.bind({'alt'}, 't', function() openApp("终端") end)
hs.hotkey.bind({'alt'}, 'j', function() openApp("IntelliJ IDEA CE") end)
--hs.hotkey.bind({'alt'}, 'v', function() openApp("Visual Studio Code") end)
-- 单次按键即可循环切换 VSCode 窗口
local vscode_bundle_id = "com.microsoft.VSCode"
local last_vscode_win = nil

function switchVSCodeWindow()
    local app = hs.application.get(vscode_bundle_id)
    if not app then
        hs.alert.show("VSCode 未运行")
        return
    end

    local windows = hs.fnutils.filter(app:allWindows(), function(win)
        return win:isStandard() and win:isVisible()
    end)

    if #windows < 2 then
        hs.alert.show("只有一个 VSCode 窗口")
        return
    end

    local current = hs.window.focusedWindow()
    local target = nil

    -- 如果当前是 VSCode 窗口，则切换到另一个
    if current and current:application():bundleID() == vscode_bundle_id then
        for _, w in ipairs(windows) do
            if w:id() ~= current:id() then
                target = w
                break
            end
        end
    -- 否则聚焦上次的 VSCode 窗口（或第一个）
    else
        target = last_vscode_win or windows[1]
    end

    if target then
        last_vscode_win = current
        target:focus()
        target:raise()
    end
end
-- 绑定快捷键：Alt + V
hs.hotkey.bind({"alt"}, "v", switchVSCodeWindow)
    
   ```
