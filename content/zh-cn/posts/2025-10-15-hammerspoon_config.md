+++
title= "hammerspoon config for mac"
description= "macOS è‡ªåŠ¨åŒ–å·¥å…·"
date = "2025-10-15"
tags = [
    "hammerspoon"
]
categories = [
  "æŠ€æœ¯"
]
series = [
  "å·¥å…·"
]
#menu = "main"
+++

#### è¯´æ˜
   Hammerspoon æ˜¯ä¸€æ¬¾é©å‘½æ€§çš„ macOS æ¡Œé¢è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå®ƒå°†ç³»ç»Ÿçº§ API ä¸çµæ´»çš„ Lua è„šæœ¬å¼•æ“ç›¸ç»“åˆã€‚é€šè¿‡ç¼–å†™è‡ªå®šä¹‰çš„ Lua è„šæœ¬ï¼Œæ‚¨å¯ä»¥å¯¹ç³»ç»Ÿè¿›è¡Œå¼ºå¤§çš„æ§åˆ¶ã€‚   
   ç¨‹åºå‘˜ä¸€èˆ¬çš„å·¥ä½œä¹ æƒ¯éƒ½æ˜¯ä¸¤ä¸ªæ˜¾ç¤ºå±å¹•ï¼Œä¸¤ä¸ªæµè§ˆå™¨çª—å£ï¼Œå¤šä¸ªç¼–ç¨‹ç¼–è¾‘å™¨çª—å£ï¼Œå†åŠ è‡³å°‘ä¸€ä¸ªå³æ—¶é€šè®¯å·¥å…·,æˆ–è€…è¿˜æœ‰ä¸€ä¸ªç»ˆç«¯consoleã€‚å¦‚æœä½¿ç”¨ç³»ç»Ÿå¿«æ·é”®åˆ‡æ¢ä¸å¤Ÿç²¾ç¡®ï¼Œç”¨é¼ æ ‡åˆä¸æ–¹ä¾¿ï¼Œç‰¹åˆ«æ˜¯éœ€è¦æŠŠå…‰æ ‡ç§»åˆ°æ‰©å±•çš„æ˜¾ç¤ºå±çš„æ—¶å€™ã€‚Hammerspoonä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„macosè‡ªåŠ¨åŒ–å·¥å…·å¯ä»¥å¸¦é¢†å¾ˆå¤§çš„æ–¹ä¾¿ã€‚
   + å¦‚æœå¿«æ·é”®ä¸èµ·ä½œç”¨ï¼Œåˆ‡æ¢è¾“å…¥æ³•ä¸ºè‹±æ–‡.
   + ä»¥ä¸‹å¿«æ·é”®ï¼Œé‡Œé¢æœ‰â€œ+â€å·ï¼Œè¡¨ç¤ºåˆ†æ®µï¼Œä¸ä»£è¡¨é”®ç›˜ï¼Œå…ˆæŒ‰å‰é¢éƒ¨åˆ†ï¼Œåœ¨1ç§’å†…å†æŒ‰åé¢éƒ¨åˆ†ã€‚
   + vscodeç‰ˆæœ¬:1.80.1. å®‰è£…äº†golang,vimæ’ä»¶ã€‚macos 12.6.
   + https://github.com/Hammerspoon/hammerspoon

##### ç¯å¢ƒ

   + Macos 14 
   + Hammerspoon 1.0.0

##### å®‰è£…
   + å®˜æ–¹è¿æ¥ https://github.com/Hammerspoon/hammerspoon
   + å‚è€ƒè¯´æ˜ï¼Œä¸‹è½½dmgæ–‡ä»¶å®‰è£…æˆ–è€…brewå®‰è£…å‡å¯ã€‚


##### é»˜è®¤åŠŸèƒ½å¿«æ·é”®
   + âŒ˜+`, `ä¸ºtabé”®ä¸Šé¢çš„æŒ‰é”®ã€‚å¼¹å‡ºæ¥ä¸€ä¸ªé€‰æ‹©çª—å£,å¦‚ä¸‹:
    ![image](images/post/tools/2015-10-15-1.jpg)
   + å†æŒ‰æ•°å­—æˆ–è€…å­—æ¯ï¼Œå³å¯åˆ‡æ¢åˆ°å¯¹åº”çš„çª—å£ã€‚

##### è‡ªå®šä¹‰åŠŸèƒ½å¿«æ·é”®

   + ç‚¹å‡»å³ä¸Šè§’ğŸ”¨å›¾æ ‡ï¼Œé€‰æ‹© â€œopen config",å¯ä»¥è‡ªå·±å†™luaè„šæœ¬ã€‚å†æ¬¡é€‰æ‹© â€œreload configâ€å³å¯ç”Ÿæ•ˆã€‚  
   + luaè„šæœ¬åŠŸèƒ½å¯å‚è€ƒgithubå®˜ç½‘.  
   + ä»¥ä¸‹æ˜¯æˆ‘ä¸ªäººå®ç°çš„ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚é¼ æ ‡å…‰æ ‡åœ¨ä¸»æ˜¾ç¤ºå±å’Œæ‰©å±•å±ä¹‹é—´åˆ‡æ¢, vscodeå¤šä¸ªçª—å£å¾ªç¯åˆ‡æ¢ç­‰ã€‚  

   ```
local hotswitchHs = require("hotswitch-hs/hotswitch-hs")
-- hotswitchHs.enableAutoUpdate() -- If you don't want to update automatically, remove this line.
--hotswitchHs.setAutoGeneratedKeys({"1", "2", "3", "4", "5", "6", "7", "8", "9", "0"})
hotswitchHs.enableAllSpaceWindows()

hs.hotkey.bind({"command"}, "`", hotswitchHs.openOrClose) -- Set a keybind you like to open HotSwitch-HS panel.

-- ä½¿ç”¨ã€Option+tabã€‘åœ¨ä¸åŒå±å¹•ä¹‹é—´ç§»åŠ¨é¼ æ ‡
-- option==alt
hs.hotkey.bind({'option'}, 'tab', function()
    local screen = hs.mouse.getCurrentScreen()
    local nextScreen = screen:next()
    local rect = nextScreen:fullFrame()
    local center = hs.geometry.rectMidPoint(rect)
    hs.mouse.absolutePosition(center)
end)
  
-- ä½¿ç”¨ã€Option+Wã€‘åœ¨ä¸åŒå±å¹•ä¹‹é—´ç§»åŠ¨çª—å£
hs.hotkey.bind({'option'}, 'W', function()
    -- get the focused window
    local win = hs.window.focusedWindow()
    -- get the screen where the focused window is displayed, a.k.a. current screen
    local screen = win:screen()
    -- compute the unitRect of the focused window relative to the current screen
    -- and move the window to the next screen setting the same unitRect 
    win:move(win:frame():toUnitRect(screen:frame()), screen:next(), true, 0)
end)

local function openApp(appName)
    local app = hs.application.get(appName)
    if not app then
        hs.application.launchOrFocus(appName)
    else
        app:activate()
         -- ç§»åŠ¨é¼ æ ‡åˆ°çª—å£ä¸­å¿ƒ
        local f = target:frame()
        hs.mouse.setAbsolutePosition({ x = f.x + f.w / 2, y = f.y + f.h / 2 })
    end
end

-- alt+ a - z
hs.hotkey.bind({'alt'}, 'c', function() openApp("Chrome") end)
hs.hotkey.bind({'alt'}, 'i', function() openApp("å¾®ä¿¡") end)
hs.hotkey.bind({'alt'}, 't', function() openApp("ç»ˆç«¯") end)
hs.hotkey.bind({'alt'}, 'j', function() openApp("IntelliJ IDEA CE") end)
--hs.hotkey.bind({'alt'}, 'v', function() openApp("Visual Studio Code") end)i
-- ç»‘å®šå¿«æ·é”®ï¼šAlt + V
-- VSCode çª—å£å¾ªç¯åˆ‡æ¢é€»è¾‘
-- å¿«æ·é”®ç»‘å®š (âŒ¥ + âŒ˜ + V)
local function focusNextVSCode()
    local vscodeAppNames = { "Visual Studio Code", "Code", "Code - Insiders" }
    local vscodeApp = nil
    local vscodeAppName = nil

    -- æ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„ VSCode åº”ç”¨
    for _, name in ipairs(vscodeAppNames) do
        vscodeApp = hs.application.get(name)
        if vscodeApp then
            vscodeAppName = name
            break
        end
    end

    -- 1ï¸âƒ£ VSCode æœªå¯åŠ¨ â†’ å¯åŠ¨
    if not vscodeApp then
        hs.alert.show("Launching VSCodeâ€¦")
        hs.task.new("/usr/bin/open", nil, { "-a", "Visual Studio Code" }):start()
        return
    end

    -- 2ï¸âƒ£ è·å–æ‰€æœ‰ VSCode çª—å£
    local allWindows = vscodeApp:allWindows()
    local vscodeWindows = {}
    for _, win in ipairs(allWindows) do
        local ok, frame = pcall(function() return win:frame() end)
        if ok and frame and frame.w > 0 and frame.h > 0 then
            table.insert(vscodeWindows, win)
        end
    end

    -- æ²¡æœ‰çª—å£ â†’ æ¿€æ´» VSCode
    if #vscodeWindows == 0 then
        hs.alert.show("Activating VSCodeâ€¦")
        hs.osascript.applescript(string.format('tell application "%s" to activate', vscodeAppName))
        return
    end

    -- æŒ‰ ID æ’åºä¿è¯é¡ºåºä¸€è‡´
    table.sort(vscodeWindows, function(a, b)
        return a:id() < b:id()
    end)

    -- å½“å‰çª—å£
    local currentWindow = hs.window.focusedWindow()
    local currentAppName = currentWindow and currentWindow:application():name() or ""

    -- 3ï¸âƒ£ å½“å‰ä¸æ˜¯ VSCode â†’ èšç„¦æœ€åä¸€ä¸ª VSCode çª—å£
    if currentAppName ~= vscodeAppName then
        local target = vscodeWindows[#vscodeWindows]
        if target:isMinimized() then target:unminimize() end
        target:focus()
        vscodeApp:activate()

        -- ç§»åŠ¨é¼ æ ‡åˆ°çª—å£ä¸­å¿ƒ
        local f = target:frame()
        hs.mouse.setAbsolutePosition({ x = f.x + f.w / 2, y = f.y + f.h / 2 })
        return
    end

    -- 4ï¸âƒ£ å½“å‰æ˜¯ VSCode
    if #vscodeWindows == 1 then
        vscodeWindows[1]:focus()
        vscodeApp:activate()
        local f = vscodeWindows[1]:frame()
        hs.mouse.setAbsolutePosition({ x = f.x + f.w / 2, y = f.y + f.h / 2 })
        return
    end

    -- å½“å‰æ˜¯ VSCodeï¼Œæœ‰å¤šä¸ªçª—å£ â†’ å¾ªç¯åˆ‡æ¢
    local currentId = currentWindow:id()
    local nextIndex = 1
    for i, win in ipairs(vscodeWindows) do
        if win:id() == currentId then
            nextIndex = (i % #vscodeWindows) + 1
            break
        end
    end

    local nextWin = vscodeWindows[nextIndex]
    if nextWin:isMinimized() then nextWin:unminimize() end
    nextWin:focus()
    vscodeApp:activate()

    -- å°†é¼ æ ‡ç§»åŠ¨åˆ°ç›®æ ‡çª—å£ä¸­å¿ƒï¼ˆè·¨æ˜¾ç¤ºå™¨ï¼‰
    local f = nextWin:frame()
    hs.mouse.setAbsolutePosition({ x = f.x + f.w / 2, y = f.y + f.h / 2 })
end
-- å¿«æ·é”®ç»‘å®š (âŒ¥ + v)
hs.hotkey.bind({"alt"}, "v", focusNextVSCode)
    
   ```
